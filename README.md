# 搬瓦工，搬瓦工教程，搬瓦工翻墙

分享搬瓦工教程和搬瓦工优惠码，搬瓦工CN2 GIA、搬瓦工香港、搬瓦工日本、搬瓦工搭建、搬瓦工使用。

其实大部分国内用户购买搬瓦工VPS都是用于翻墙的，但是很多朋友在买了搬瓦工VPS并不知道如何搭建代理，本文从零开始介绍搬瓦工VPS如何搭建代理实现科学上网翻墙，包括搬瓦工购买、连接搬瓦工、代理搭建、客户端配置等。

本文所有链接，按住 Ctrl + 单击， 即可在新窗口打开链接。

目录：
- [ 搬瓦工官网](#head1)
- [ 搬瓦工购买教程](#head2)
	- [ 搬瓦工VPS方案选择](#head3)
	- [ 搬瓦工VPS购买](#head4)
	- [ 搬瓦工最新优惠码](#head5)
	- [ 搬瓦工账户注册](#head6)
	- [ 搬瓦工支付](#head7)
- [ 搬瓦工连接教程](#head8)
	- [搬瓦工SSH IP和端口](#head9)
	- [ 搬瓦工SSH密码](#head10)
	- [ Windows连接搬瓦工教程](#head11)
	- [ Mac连接搬瓦工教程](#head12)
- [ 搬瓦工翻墙教程](#head13)
	- [ 搬瓦工搭建V2Ray教程](#head14)
		- [ 搭建V2Ray代理](#head15)
		- [ 管理V2Ray代理](#head16)
		- [ 配置V2Ray客户端](#head17)
		- [ 搭建V2Ray常见问题](#head18)
	- [ 搬瓦工搭建SS/SSR教程](#head19)
		- [ 搭建Shadowsocks代理](#head20)
		- [ 搭建ShadowsocksR代理](#head21)
		- [ 管理SS/SSR代理](#head22)
		- [ 配置SS/SSR客户端](#head23)
		- [ 搭建SS/SSR常见问题](#head24)
- [ 声明与提问](#head25)


## <span id="head1"> 搬瓦工官网</span>
一些搬瓦工的常用网站：
1. 搬瓦工官网：[bwh81.net](https://linknn.net/bwg)
2. 搬瓦工中文网：[搬瓦工](https://bwg6.net)
3. 搬瓦工套餐整理：[搬瓦工所有套餐](https://bwg6.net/all/)
4. 搬瓦工机场：[Just My Socks](https://jms6.net)

更多搬瓦工教程推荐关注[搬瓦工](https://bwg6.net)，分享[搬瓦工优惠码](https://bwg6.net)和[搬瓦工教程](https://bwg6.net/jiaocheng/)。

## <span id="head2"> 搬瓦工购买教程</span>
包括：
1. [搬瓦工注册与购买教程，循环优惠码，支持支付宝付款](https://bwgvps.github.io/purchase-bandwagonhost/)
### <span id="head3"> 搬瓦工VPS方案选择</span>

搬瓦工有很多方案可供选择，我们在购买搬瓦工VPS前第一件事就是要确定我们最需要的是哪一款搬瓦工方案。

一般来说，推荐大家购买搬瓦工CN2 GIA（美国CN2 GIA）套餐，三网CN2 GIA线路，国内访问速度快，晚高峰也不卡顿，季付49.99美元起，国内体验非常不错。如果你预算不够，则购买搬瓦工CN2 GT（美国CN2 GT）套餐，线路质量没有CN2 GIA好，但是国内速度也比非优化线路要好，年付49.99美元起。最后，如果你预算很多，那么直接购买搬瓦工香港CN2 GIA，香港线路，三网直连，低延迟、速度快。

本站推荐的搬瓦工套餐如下：

|套餐|CPU|内存|硬盘|宽带|流量/月|价格|购买|
|----|----|----|----|----|----|----|----|
|美国CN2 GT|1核|1GB|20G|1Gbps|1TB|$49.99/年|  [立即购买](https://linknn.net/bwg/57)  |
|美国CN2 GIA|2核|1GB|20G|2.5Gbps|1TB|$49.99/季度$169.99/年|  [立即购买](https://linknn.net/bwg/87)  |
|香港CN2 GIA|2核|2GB|40G|1Gbps|500GB|$89.99/月$899.99/年|  [立即购买](https://linknn.net/bwg/95)  |

上表中主要是整理了几款便宜套餐，更多搬瓦工套餐可以去搬瓦工官网查看：[搬瓦工官网套餐汇总](https://linknn.net/bwg/all)

### <span id="head4"> 搬瓦工VPS购买</span>

先选择想要的方案，点击方案后方的"立即购买”即可直接进入搬瓦工具体方案的购买页面。首先进入到是搬瓦工信息介绍页面，包括VPS基本信息（配置、带宽、流量等），如下图所示：

![搬瓦工VPS信息.png](https://i.loli.net/2021/07/15/MYF9rGlbAyonc6R.png)

这里是付款周期和机房位置，确认无误后点击“Add to Cart”进入下一步：

![搬瓦工VPS机房位置.png](https://i.loli.net/2021/07/15/74UTv65MetGcWxJ.png)

### <span id="head5"> 搬瓦工最新优惠码</span>

这里可以使用优惠码获得折扣，搬瓦工最新的优惠码是BWH3HYATVBJW，根据图示，填入优惠码，先点击“Validate Code”，再点击"Check Out"就可以看到使用完优惠码后的价格：

![搬瓦工优惠码.png](https://i.loli.net/2021/07/15/j9GXqlkFQx1BUKW.png)

### <span id="head6"> 搬瓦工账户注册</span>

首次注册的用户需要如实填写个人信息，根据下列图文要求，填写姓名，邮箱，账户密码，地址等等，注意注册信息要如实填写，例如中国用户在注册时国家（Country）必须是China（中国） ，否则可能会被认为是Fraud（欺诈）而取消订单。

![搬瓦工账号信息.png](https://i.loli.net/2021/07/15/fnZgPAGvBxtip4F.png)

### <span id="head7"> 搬瓦工支付</span>

最后就是搬瓦工支付页面，搬瓦工支持支付宝、信用卡和PayPal支付，选择“Alipay”（支付宝）为支付方式，然后在"I have read and...."处打勾，最后点击"Complete Order"：

![搬瓦工支付.png](https://i.loli.net/2021/07/15/yZiI2qc3OjQY9Rn.png)

最后用支付宝扫码完成支付，也就完成了搬瓦工VPS方案的购买。

## <span id="head8"> 搬瓦工连接教程</span>
包括：
1. [搬瓦工SSH连接信息查看：IP、端口、密码](https://bwgvps.github.io/bandwagonhost-vps-info/)
2. [本地Windows/Mac连接搬瓦工VPS教程](https://bwgvps.github.io/connect-bandwagonhost-vps/)

### <span id="head9">搬瓦工SSH IP和端口</span>

搬瓦工官网：[点击打开搬瓦工官网](https://linknn.net/bwg)

搬瓦工VPS方案已经购买成功的朋友，可以直接进入搬瓦工官网，如下图所示，点击上方的“Client Area"，即可进入搬瓦工 KiwiVM后台；如果还未购买，可参照《[搬瓦工注册与购买](https://bwgvps.github.io/purchase-bandwagonhost/)》这篇文章，购买搬瓦工VPS方案，购买成功后再进行上述操作。

![搬瓦工的官方网站.png](https://i.loli.net/2021/07/17/aTkKBX3LRWedjcC.png)

依次点击页面上方“Services”->“My　Services”，就会出现下图页面，然后点击”KiwiVM　Control　Panel“即可进入控制页面。

![搬瓦工重置密码操作第一步.png](https://i.loli.net/2021/07/17/f3TOIk7xatyPK6r.png)

在进入搬瓦工 KiwiVM后台后，就能看到以下内容，包括搬瓦工SSH IP、端口和一些基本信息。

![SSH的IP和端口界面.png](https://i.loli.net/2021/07/17/QKr2IA89qxb4MUn.png)

### <span id="head10"> 搬瓦工SSH密码</span>

搬瓦工的SSH用户名是root，而SSH密码会在你购买套餐/重装系统/重置密码后发至你注册时所填的绑定邮箱里。如果没有收到或忘记密码了，可以通过重置密码的方式获取root密码。

因为重置密码需要保证VPS开机状态，所以在进行密码重置前我们要格外注意。在搬瓦工实例管理界面，确保VPS状态为”Running“。

![VPS状态 _1_.png](https://i.loli.net/2021/07/17/KmFerTDf4B6xNSv.png)

之后选择左侧的”Root password modification“，进入搬瓦工的修改root密码栏目，再点击”Generate and set new root password“就可以修改并设置搬瓦工的ROOT密码了。

![搬瓦工重置密码第二步.png](https://i.loli.net/2021/07/17/3ec49NhQIWPFVt1.png)

### <span id="head11"> Windows连接搬瓦工教程</span>

要注意的是，Windows需要远程桌面的话需要借助PuTTY工具，这是一个口碑不错并且免费的SSH工具。

第一步我们需要根据自己所用电脑的系统（32位还是64位）下载并安装好PuTTY工具。

这里给大家给分享一下PuTTY官方下载地址：https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html

![下载PuTTY.png](https://i.loli.net/2021/07/19/vpik3ReQucjNSw2.png)

随后打开PuTTY，会弹出填写信息的界面，如下图所示。在图中所标的位置进行如实填写SSH IP和端口，接着选择SSH连接类型、设置连接会话名称，点击“Save”进行保存，最后点击“Open”键开始连接登录：

![填写SSH信息.png](https://i.loli.net/2021/07/19/V54iS93KJkF8oGb.png)

如果是第一次使用PuTTY连接这台搬瓦工VPS，PuTTY会提示保存服务器指纹，直接点击“Accept”即可，保存后之后连接就不会再提示了：

![接受SSH.png](https://i.loli.net/2021/07/19/fV8IWNSjOLhBP3H.png)

最后在随后出现的页面中输入用户名“root”、密码，如下图，就表明已经成功使用PuTTY连接上搬瓦工VPS了：

![搬瓦工连接成功.png](https://i.loli.net/2021/07/19/R3Ho5fWlFM2JOr9.jpg)

### <span id="head12"> Mac连接搬瓦工教程</span>

和Windows系统的连接方法相比，Mac实在是要方便的多，因为Mac可以直接使用自带的终端Terminal实现本地连接，不需要借助第三方软件：

![Mac自带Terminal.png](https://i.loli.net/2021/07/19/QhCZWRJxg45Br13.png)

首先打开终端，输入ssh root@IP地址 -p ssh端口，记得把当中IP地址和SSH端口换成你自己VPS的信息：

![Terminal命令.jpg](https://i.loli.net/2021/07/19/8jBafbPVnuMpgNt.jpg)

一样的是，如果是第一次连接，就需要保存VPS的签名密钥，输入“yes”保存即可。之后是输入SSH密码（此时不会显示），输入完毕后直接回车即可，只要信息填写都正确，就会出现连接成功的标志了。

## <span id="head13"> 搬瓦工翻墙教程</span>
搬瓦工机场使用教程：
1. [搬瓦工机场Just My Socks注册与购买教程](https://bwgvps.github.io/purchase-justmysocks/)
2. [搬瓦工机场Just My Socks使用教程：连接信息查看，本地连接，以及常见教程整理](https://bwgvps.github.io/justmysocks-tutorial/)

自建教程：
1. 搬瓦工搭建V2Ray教程：[搬瓦工VPS搭建V2Ray代理科学上网翻墙教程](https://bwgvps.github.io/build-v2ray-on-bandwagonhost-vps/)
2. 搬瓦工搭建SS/SSR教程：[搬瓦工VPS搭建Shadowsocks/ShadowsocksR(SS/SSR)代理科学上网翻墙教程](https://bwgvps.github.io/build-shadowsocks-shadowsocksr-on-bandwagonhost-vps/)

### <span id="head14"> 搬瓦工搭建V2Ray教程</span>
#### <span id="head15"> 搭建V2Ray代理</span>
目前，已经成功购买搬瓦工VPS，并且成功连上搬瓦工VPS了。

输入下面命令安装V2Ray：

```
bash <(curl -s -L https://git.io/bwg_v2ray)
```
这里如果提示`curl: command not found`，则先安装curl：

- Ubuntu/Debian系统安装curl方法: `apt-get update -y && apt-get install curl -y`
- CentOS系统安装curl方法: `yum update -y && yum install curl -y`

安装好curl后再次运行`bash <(curl -s -L https://git.io/bwg_v2ray)`即可。

第一步是提示安装还是卸载，自然是开始安装，输入1即可开始安装：

![v2ray-install.png](https://i.loli.net/2021/08/05/LOAWaQhzGoDNBnY.png)

之后是选择V2Ray传输协议，很多种，包括TCP、WebSocket等，如果你不知道怎么选就直接回车选择默认的TCP即可：

![v2ray-protocol-option.png](https://i.loli.net/2021/08/05/gkBQqrY1lG5ZD9a.png)

接下来就是一些其他设置，如V2Ray端口、是否开启广告拦截、是否配置Shadowsocks等，一样的，如果你不知道怎么选就直接回车选择默认的即可：

![v2ray-other-options.png](https://i.loli.net/2021/08/05/F3vdb9pfMUgytwH.png)

选完配置后，就到了最后一步，确认无误后按下回车键开始安装V2Ray：

![v2ray-install-start.png](https://i.loli.net/2021/08/05/sihXO562mdDuFfR.png)

最后，如下图所示，就表示你的搬瓦工VPS成功安装V2Ray了，页面上显示的是你V2Ray的连接信息：

![v2ray-install-end.png](https://i.loli.net/2021/08/05/KV9tenqiwbPG7Ak.png)

配置文件路径：

- V2Ray 配置文件路径：/etc/v2ray/config.json
- Caddy 配置文件路径：/etc/caddy/Caddyfile
- 脚本配置文件路径: /etc/v2ray/233blog_v2ray_backup.conf


#### <span id="head16"> 管理V2Ray代理</span>
成功安装V2Ray后，我们直接输入`v2ray`即可打开管理页面，如下图：

![v2ray-manage.png](https://i.loli.net/2021/08/05/2W4vXpLy8mfUNYA.png)

常见的管理命令如下：

- `v2ray info` 查看 V2Ray 配置信息
- `v2ray config` 修改 V2Ray 配置
- `v2ray link` 生成 V2Ray 配置文件链接
- `v2ray infolink` 生成 V2Ray 配置信息链接
- `v2ray qr` 生成 V2Ray 配置二维码链接
- `v2ray ss` 修改 Shadowsocks 配置
- `v2ray ssinfo` 查看 Shadowsocks 配置信息
- `v2ray ssqr` 生成 Shadowsocks 配置二维码链接
- `v2ray status` 查看 V2Ray 运行状态
- `v2ray start` 启动 V2Ray
- `v2ray stop` 停止 V2Ray
- `v2ray restart` 重启 V2Ray
- `v2ray log` 查看 V2Ray 运行日志
- `v2ray update` 更新 V2Ray
- `v2ray update.sh` 更新 V2Ray 管理脚本
- `v2ray uninstall` 卸载 V2Ray

#### <span id="head17"> 配置V2Ray客户端</span>
完成V2Ray服务端搭建后，我们就需要在本地客户端配置V2Ray了，支持iOS、Android手机、Mac、Windows等，其实就是在客户端上填入上一步的连接信息即可。

详细教程整理如下。

**1、iOS苹果手机客户端**

[iOS苹果手机客户端Shadowrocket下载方法与使用教程](https://github.com/bwgvps/v2ray-tutorial/wiki/iOS苹果手机客户端Shadowrocket下载方法与使用教程)

**2、Android安卓手机客户端**

[安卓手机客户端v2rayNG下载方法与使用教程](https://github.com/bwgvps/v2ray-tutorial/wiki/安卓手机客户端v2rayNG下载方法与使用教程)

**3、Mac客户端**

[Mac客户端V2RayX下载方法与使用教程](https://github.com/bwgvps/v2ray-tutorial/wiki/Mac客户端V2RayX下载方法与使用教程)

**4、Windows客户端**

[Windows客户端v2rayN下载方法与使用教程](https://github.com/bwgvps/v2ray-tutorial/wiki/Windows客户端v2rayN下载方法与使用教程)

#### <span id="head18"> 搭建V2Ray常见问题</span>
这个V2Ray一键脚本支持：
1. 支持 V2Ray 多数传输协议
2. 支持 WebSocket + TLS / HTTP/2
3. 支持 动态端口 (WebSocket + TLS，Socks5， HTTP/2 除外)
4. 支持 屏蔽广告
5. 支持 配置 Shadowsocks
6. 支持 下载客户端配置文件 (不用 Xshell 也可以下载)
7. 客户端配置文件同时支持 SOCKS 和 HTTP
8. 支持 生成 V2Ray 配置二维码链接 (仅适用部分客户端)
9. 支持 生成 V2Ray 配置信息链接
10. 支持 生成 Shadowsocks 配置二维码链接
11. 支持修改 V2Ray 传输协议
12. 支持修改 V2Ray 端口
13. 支持修改 动态端口
14. 支持修改 用户ID
15. 支持修改 TLS 域名
16. 支持修改 Shadowsocks 端口
17. 支持修改 Shadowsocks 密码
18. 支持修改 Shadowsocks 加密协议
19. 自动启用 BBR 优化 (如果内核支持)
20. 集成可选安装 BBR (by teddysun.com)
21. 集成可选安装 锐速 (by moeclub.org)
22. 一键 查看运行状态 / 查看配置信息 / 启动 / 停止 / 重启 / 更新 / 卸载 / 等等…
23. 人性化向导 & 纯净安装 & 卸载彻底

在使用过程中一般不会出现问题，直接选择下一步就可以了，如果你的系统不支持使用这个脚本，可以尝试更换一个系统，支持Ubuntu 16+ / Debian 8+ / CentOS 7+，推荐使用 Debian 9 系统，脚本会自动启用 BBR 优化。
### <span id="head19"> 搬瓦工搭建SS/SSR教程</span>
#### <span id="head20"> 搭建Shadowsocks代理</span>
目前，已经成功购买搬瓦工VPS，并且成功连上搬瓦工VPS了。

本文介绍的Shadowsocks脚本是四合一，我们**只需要安装一种代理**就可以了。

输入下面命令搭建Shadowsocks，一共3个命令，分别表示下载脚本、赋予脚本执行命令和执行脚本：

```
wget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh
chmod +x shadowsocks-all.sh
./shadowsocks-all.sh 2>&1 | tee shadowsocks-all.log
```
如下图所示：

![ss-all.png](https://i.loli.net/2021/08/09/jEat4KPFubg7YMw.png)

这里如果提示`wget: command not found`，则先安装curl：

- Ubuntu/Debian系统安装wget方法: `apt-get update -y && apt-get install wget -y`
- CentOS系统安装wget方法: `yum update -y && yum install wget -y`

安装好wget后再依次运行上面的三个命令即可。

脚本会提示一些选项，包括安装的Shadowsocks版本、端口号、密码等，我们可以自己设置，也可以直接“回车”使用默认设置：

![ss-all-options.png](https://i.loli.net/2021/08/09/UfQg4uqnCXGImy8.png)

以及Shadowsocks加密方式，也可以直接选择默认的：

![ss-all-cipher.png](https://i.loli.net/2021/08/09/rOe1h3RDUQnEVsP.png)

最后，按下任意键盘开始安装：

![ss-all-start.png](https://i.loli.net/2021/08/09/S26ekGT1HqsjiXE.png)

如下图所示，表示Shadowsocks已经安装完毕，包括IP地址、端口、密码、加密方式，以及二维码和SS链接：

![ss-all-end.png](https://i.loli.net/2021/08/09/ZESoj3hY9PFpGvJ.png)


#### <span id="head21"> 搭建ShadowsocksR代理</span>
再说一遍，本文介绍的Shadowsocks脚本是四合一，我们**只需要安装一种代理**就可以了，如果你已经安装上一部分的脚本安装了SS，就不需要安装SSR了。

同样是在连上搬瓦工VPS后，执行以下命令：

```
wget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh
chmod +x shadowsocks-all.sh
./shadowsocks-all.sh 2>&1 | tee shadowsocks-all.log
```
如下图所示：

![ss-all.png](https://i.loli.net/2021/08/09/jEat4KPFubg7YMw.png)

这里如果提示`wget: command not found`，则先安装curl：

- Ubuntu/Debian系统安装wget方法: `apt-get update -y && apt-get install wget -y`
- CentOS系统安装wget方法: `yum update -y && yum install wget -y`

安装好wget后再依次运行上面的三个命令即可。

这次我们选择ShadowskcsR，同样是一些设置选项，如果不知道怎么选，直接“回车”使用默认设置：

![ss-all-ssr.png](https://i.loli.net/2021/08/09/svaIr1gH7Zxiq36.png)

最后，如下图所示，ShadowskcsR安装成功，包括服务器IP、端口、密码、加密方式、obfs、协议、二维码、SSR链接等：

![ss-all-ssr-end.png](https://i.loli.net/2021/08/09/9UlZAHocqPvdsNC.png)

#### <span id="head22"> 管理SS/SSR代理</span>

启动脚本后面的参数含义，从左至右依次为：启动，停止，重启，查看状态。

Shadowsocks-Python 版：
```
/etc/init.d/shadowsocks-python start | stop | restart | status
```

ShadowsocksR 版：
```
/etc/init.d/shadowsocks-r start | stop | restart | status
```

Shadowsocks-Go 版：
```
/etc/init.d/shadowsocks-go start | stop | restart | status
```

Shadowsocks-libev 版：
```
/etc/init.d/shadowsocks-libev start | stop | restart | status
```

配置文件路径：

Shadowsocks-Python 版：
/etc/shadowsocks-python/config.json

ShadowsocksR 版：
/etc/shadowsocks-r/config.json

Shadowsocks-Go 版：
/etc/shadowsocks-go/config.json

Shadowsocks-libev 版：
/etc/shadowsocks-libev/config.json

脚本卸载方法（每次卸载一种）：
```
./shadowsocks-all.sh uninstall
```

#### <span id="head23"> 配置SS/SSR客户端</span>
完成Shadowsocks(R)服务端搭建后，我们就需要在本地客户端配置Shadowsocks(R)了，支持iOS、Android手机、Mac、Windows等，其实就是在客户端上填入上一步的连接信息即可。

详细教程整理如下。

**1、iOS苹果手机客户端**

[iOS苹果手机客户端使用Shadowsocks教程](https://github.com/bwgvps/shadowsocks-tutorial/wiki/iOS苹果手机客户端使用Shadowsocks教程)

**2、Android安卓手机客户端**

[Android安卓手机客户端使用Shadowsocks教程](https://github.com/bwgvps/shadowsocks-tutorial/wiki/Android安卓手机客户端使用Shadowsocks教程)

**3、Mac客户端**

[Mac苹果电脑客户端使用Shadowsocks教程](https://github.com/bwgvps/shadowsocks-tutorial/wiki/Mac苹果电脑客户端使用Shadowsocks教程)

**4、Windows客户端**

[Windows电脑客户端使用Shadowsocks教程](https://github.com/bwgvps/shadowsocks-tutorial/wiki/Windows电脑客户端使用Shadowsocks教程)

#### <span id="head24"> 搭建SS/SSR常见问题</span>

本文介绍的Shadowsocks脚本是四合一，我们**只需要安装一种代理**就可以了，当然也可以4种都装，不会冲突。
1. 一键安装 Shadowsocks-Python， ShadowsocksR， Shadowsocks-Go， Shadowsocks-libev 版（四选一）服务端；
2. 各版本的启动脚本及配置文件名不再重合；
3. 每次运行可安装一种版本；
4. 支持以多次运行来安装多个版本，且各个版本可以共存（注意端口号需设成不同）；
5. 若已安装多个版本，则卸载时也需多次运行（每次卸载一种）；

脚本在使用过程中一般不会出现问题，直接选择下一步就可以了，如果你的系统不支持使用这个脚本，可以尝试更换一个系统，支持CentOS 6+，Debian 7+，Ubuntu 12+

## <span id="head25"> 声明与提问</span>
Powered by [搬瓦工](https://bwgvps.github.io)，任何问题可以提[issues](https://github.com/bwgvps/bwgvps.github.io/issues)。
